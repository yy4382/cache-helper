(()=>{async function p(t){return await new Promise((r,i)=>{$httpClient.get(t,async(n,e,s)=>{n&&i(n),r(s)})})}async function f(t,r,i){let n=await p(r);$persistentStore.write(n,t);let e=$persistentStore.read(i),s=JSON.parse(e),o=s.find(c=>c.key===t);return o.update=new Date().toISOString(),$persistentStore.write(JSON.stringify(s),this.expireInfoKey),n}async function S(t,r,i=3600,n="json.cacheHelper.expireInfo"){let e=$persistentStore.read(n);if(!e){let a=await p(r);return $persistentStore.write(a,t),e=[],e.push({key:t,update:new Date().toISOString()}),$persistentStore.write(JSON.stringify(e),this.expireInfoKey),a}e=JSON.parse(e);let s=e.find(a=>a.key===t);if(!s){let a=await p(r);return $persistentStore.write(a,t),e.push({key:t,update:new Date().toISOString()}),$persistentStore.write(JSON.stringify(e),this.expireInfoKey),a}if(i===-1)return $persistentStore.read(t);if(i===0)return await f(t,r,n);let o=new Date,c=new Date(s.update);return(o-c)/1e3>i?await f(t,r,n):$persistentStore.read(t)}})();
